{"ast":null,"code":"import { BehaviorSubject, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthService {\n  constructor(http) {\n    this.http = http;\n    this.baseUrl = 'http://localhost:8080/api/auth';\n    this.currentUserSubject = new BehaviorSubject(null);\n    this.currentUser$ = this.currentUserSubject.asObservable();\n  }\n  get currentUser() {\n    return this.currentUserSubject.value;\n  }\n  get isLoggedIn() {\n    return this.currentUserSubject.value !== null;\n  }\n  login(username, password) {\n    return this.http.post(`${this.baseUrl}/login`, {\n      username,\n      password\n    }, {\n      withCredentials: true\n    }).pipe(tap(response => {\n      this.currentUserSubject.next(response.user);\n    }));\n  }\n  register(userData) {\n    return this.http.post(`${this.baseUrl}/register`, userData).pipe(tap(response => {\n      // After registration, automatically login\n      this.login(userData.username, userData.password).subscribe();\n    }));\n  }\n  logout() {\n    return this.http.post(`${this.baseUrl}/logout`, {}, {\n      withCredentials: true\n    }).pipe(tap(() => {\n      this.currentUserSubject.next(null);\n    }));\n  }\n  checkAuthStatus() {\n    this.http.get(`${this.baseUrl}/current`, {\n      withCredentials: true\n    }).subscribe({\n      next: response => {\n        this.currentUserSubject.next(response.user);\n      },\n      error: () => {\n        this.currentUserSubject.next(null);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function AuthService_Factory(t) {\n      return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AuthService,\n      factory: AuthService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","tap","AuthService","constructor","http","baseUrl","currentUserSubject","currentUser$","asObservable","currentUser","value","isLoggedIn","login","username","password","post","withCredentials","pipe","response","next","user","register","userData","subscribe","logout","checkAuthStatus","get","error","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\HP\\OneDrive\\Desktop\\NxtDOOR\\mini-twitter-frontend\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, Observable, tap } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private baseUrl = 'http://localhost:8080/api/auth';\r\n  private currentUserSubject = new BehaviorSubject<string | null>(null);\r\n  public currentUser$ = this.currentUserSubject.asObservable();\r\n  \r\n  constructor(private http: HttpClient) {}\r\n  \r\n  get currentUser(): string | null {\r\n    return this.currentUserSubject.value;\r\n  }\r\n  \r\n  get isLoggedIn(): boolean {\r\n    return this.currentUserSubject.value !== null;\r\n  }\r\n  \r\n  login(username: string, password: string): Observable<any> {\r\n    return this.http.post(`${this.baseUrl}/login`, { username, password }, { withCredentials: true })\r\n      .pipe(\r\n        tap((response: any) => {\r\n          this.currentUserSubject.next(response.user);\r\n        })\r\n      );\r\n  }\r\n  \r\n  register(userData: any): Observable<any> {\r\n    return this.http.post(`${this.baseUrl}/register`, userData)\r\n      .pipe(\r\n        tap((response: any) => {\r\n          // After registration, automatically login\r\n          this.login(userData.username, userData.password).subscribe();\r\n        })\r\n      );\r\n  }\r\n  \r\n  logout(): Observable<any> {\r\n    return this.http.post(`${this.baseUrl}/logout`, {}, { withCredentials: true })\r\n      .pipe(\r\n        tap(() => {\r\n          this.currentUserSubject.next(null);\r\n        })\r\n      );\r\n  }\r\n  \r\n  checkAuthStatus(): void {\r\n    this.http.get(`${this.baseUrl}/current`, { withCredentials: true })\r\n      .subscribe({\r\n        next: (response: any) => {\r\n          this.currentUserSubject.next(response.user);\r\n        },\r\n        error: () => {\r\n          this.currentUserSubject.next(null);\r\n        }\r\n      });\r\n  }\r\n}"],"mappings":"AAEA,SAASA,eAAe,EAAcC,GAAG,QAAQ,MAAM;;;AAKvD,OAAM,MAAOC,WAAW;EAKtBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAJhB,KAAAC,OAAO,GAAG,gCAAgC;IAC1C,KAAAC,kBAAkB,GAAG,IAAIN,eAAe,CAAgB,IAAI,CAAC;IAC9D,KAAAO,YAAY,GAAG,IAAI,CAACD,kBAAkB,CAACE,YAAY,EAAE;EAErB;EAEvC,IAAIC,WAAWA,CAAA;IACb,OAAO,IAAI,CAACH,kBAAkB,CAACI,KAAK;EACtC;EAEA,IAAIC,UAAUA,CAAA;IACZ,OAAO,IAAI,CAACL,kBAAkB,CAACI,KAAK,KAAK,IAAI;EAC/C;EAEAE,KAAKA,CAACC,QAAgB,EAAEC,QAAgB;IACtC,OAAO,IAAI,CAACV,IAAI,CAACW,IAAI,CAAC,GAAG,IAAI,CAACV,OAAO,QAAQ,EAAE;MAAEQ,QAAQ;MAAEC;IAAQ,CAAE,EAAE;MAAEE,eAAe,EAAE;IAAI,CAAE,CAAC,CAC9FC,IAAI,CACHhB,GAAG,CAAEiB,QAAa,IAAI;MACpB,IAAI,CAACZ,kBAAkB,CAACa,IAAI,CAACD,QAAQ,CAACE,IAAI,CAAC;IAC7C,CAAC,CAAC,CACH;EACL;EAEAC,QAAQA,CAACC,QAAa;IACpB,OAAO,IAAI,CAAClB,IAAI,CAACW,IAAI,CAAC,GAAG,IAAI,CAACV,OAAO,WAAW,EAAEiB,QAAQ,CAAC,CACxDL,IAAI,CACHhB,GAAG,CAAEiB,QAAa,IAAI;MACpB;MACA,IAAI,CAACN,KAAK,CAACU,QAAQ,CAACT,QAAQ,EAAES,QAAQ,CAACR,QAAQ,CAAC,CAACS,SAAS,EAAE;IAC9D,CAAC,CAAC,CACH;EACL;EAEAC,MAAMA,CAAA;IACJ,OAAO,IAAI,CAACpB,IAAI,CAACW,IAAI,CAAC,GAAG,IAAI,CAACV,OAAO,SAAS,EAAE,EAAE,EAAE;MAAEW,eAAe,EAAE;IAAI,CAAE,CAAC,CAC3EC,IAAI,CACHhB,GAAG,CAAC,MAAK;MACP,IAAI,CAACK,kBAAkB,CAACa,IAAI,CAAC,IAAI,CAAC;IACpC,CAAC,CAAC,CACH;EACL;EAEAM,eAAeA,CAAA;IACb,IAAI,CAACrB,IAAI,CAACsB,GAAG,CAAC,GAAG,IAAI,CAACrB,OAAO,UAAU,EAAE;MAAEW,eAAe,EAAE;IAAI,CAAE,CAAC,CAChEO,SAAS,CAAC;MACTJ,IAAI,EAAGD,QAAa,IAAI;QACtB,IAAI,CAACZ,kBAAkB,CAACa,IAAI,CAACD,QAAQ,CAACE,IAAI,CAAC;MAC7C,CAAC;MACDO,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAACrB,kBAAkB,CAACa,IAAI,CAAC,IAAI,CAAC;MACpC;KACD,CAAC;EACN;;;uBArDWjB,WAAW,EAAA0B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAX7B,WAAW;MAAA8B,OAAA,EAAX9B,WAAW,CAAA+B,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}